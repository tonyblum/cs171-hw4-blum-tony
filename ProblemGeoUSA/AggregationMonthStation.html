<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/queue.v1.min.js"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>
<script type="text/javascript" src="../jquery-1.11.0.min.js"></script>
<script src="../libs/FileSaver.js"></script>

<div id="vis"></div>


<script>


    d3.json("../data/allData2003_2004small.json",function(error,data){
       // console.log(data);

        var allDates = [];
        var timeParser = d3.time.format("%b %-d, %Y %X %p");
        
		var totalsum = 0;
		///var hourly {};
		var rdstruct = {total:0, hourly:{}};

		rdstruct.hourly[0] = 0;
		rdstruct.hourly[1] = 0;
		rdstruct.hourly[2] = 0;
		rdstruct.hourly[3] = 0;
		rdstruct.hourly[4] = 0;
		rdstruct.hourly[5] = 0;		
		rdstruct.hourly[6] = 0;
		rdstruct.hourly[7] = 0;		
		rdstruct.hourly[8] = 0;
		rdstruct.hourly[9] = 0;
		rdstruct.hourly[10] = 0;
		rdstruct.hourly[11] = 0;
		rdstruct.hourly[12] = 0;
		rdstruct.hourly[13] = 0;
		rdstruct.hourly[14] = 0;	
		rdstruct.hourly[15] = 0;
		rdstruct.hourly[16] = 0;
		rdstruct.hourly[17] = 0;
		rdstruct.hourly[18] = 0;
		rdstruct.hourly[19] = 0;
		rdstruct.hourly[20] = 0;
		rdstruct.hourly[21] = 0;
		rdstruct.hourly[22] = 0;
		rdstruct.hourly[23] = 0;

		console.log(data);

		for (var station in data){
			var d = data[station];
			//console.log(d);
			for(var key in d){
				//console.log(key);

				if(key % 24 === 0){
					rdstruct.hourly[0] += d[key].value;
				}				
				if(key % 24 === 1){
					rdstruct.hourly[1] += d[key].value;
				}
				if(key % 24 === 2){
					rdstruct.hourly[2] += d[key].value;
				}
				if(key % 24 === 3){
					rdstruct.hourly[3] += d[key].value;
				}
				if(key % 24 === 4){
					rdstruct.hourly[4] += d[key].value;
				}
				if(key % 24 === 5){
					rdstruct.hourly[5] += d[key].value;
				}
				if(key % 24 === 6){
					rdstruct.hourly[6] += d[key].value;
				}
				if(key % 24 === 7){
					rdstruct.hourly[7] += d[key].value;
				}
				if(key % 24 === 8){
					rdstruct.hourly[8] += d[key].value;
				}
				if(key % 24 === 9){
					rdstruct.hourly[9] += d[key].value;
				}
				if(key % 24 === 10){
					rdstruct.hourly[10] += d[key].value;
				}
				if(key % 24 === 11){
					rdstruct.hourly[11] += d[key].value;
				}
				if(key % 24 === 12){
					rdstruct.hourly[12] += d[key].value;
				}				
				if(key % 24 === 13){
					rdstruct.hourly[13] += d[key].value;
				}
				if(key % 24 === 14){
					rdstruct.hourly[14] += d[key].value;
				}
				if(key % 24 === 15){
					rdstruct.hourly[15] += d[key].value;
				}
				if(key % 24 === 16){
					rdstruct.hourly[16] += d[key].value;
				}
				if(key % 24 === 17){
					rdstruct.hourly[17] += d[key].value;
				}
				if(key % 24 === 18){
					rdstruct.hourly[18] += d[key].value;
				}
				if(key % 24 === 19){
					rdstruct.hourly[19] += d[key].value;
				}
				if(key % 24 === 20){
					rdstruct.hourly[20] += d[key].value;
				}
				if(key % 24 === 21){
					rdstruct.hourly[21] += d[key].value;
				}
				if(key % 24 === 22){
					rdstruct.hourly[22] += d[key].value;
				}
				if(key % 24 === 23){
					rdstruct.hourly[23] += d[key].value;
				}
				//hourlysum += 
				totalsum += d[key].value;

			}
			rdstruct[station] = totalsum;
			rdstruct[station].hourly = 1;
			rdstruct[station].hourly = 2;					
		}

		console.log(rdstruct);
        saveToFile(rdstruct,"reducedMonthStationHour2003_2004.json") // reducedDataSet

    })

    var saveToFile = function(object, filename){
        var blob, blobText;
        blobText = [JSON.stringify(object)];
        blob = new Blob(blobText, {
            type: "text/plain;charset=utf-8"
        });
        saveAs(blob, filename);
    }


</script>


</body>
</html>
