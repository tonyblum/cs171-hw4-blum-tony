<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/queue.v1.min.js"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>
<script type="text/javascript" src="../jquery-1.11.0.min.js"></script>
<script src="../libs/FileSaver.js"></script>

<div id="vis"></div>


<script>


    d3.json("../data/allData2003_2004small.json",function(error,data){
       // console.log(data);

        var allDates = [];
        var timeParser = d3.time.format("%b %-d, %Y %X %p");
        
		var totalsum = 0;
		var rdstruct = {};
		var hourlysum = 0;

		var hour0 = 0;
		var hour1 = 0;
		var hour2 = 0;
		var hour3 = 0;
		var hour4 = 0;
		var hour5 = 0;		
		var hour6 = 0;
		var hour7 = 0;		
		var hour8 = 0;
		var hour9 = 0;
		var hour10 = 0;
		var hour11 = 0;
		var hour12 = 0;
		var hour13 = 0;
		var hour14 = 0;	
		var hour15 = 0;
		var hour16 = 0;
		var hour17 = 0;
		var hour18 = 0;
		var hour19 = 0;
		var hour20 = 0;
		var hour21 = 0;
		var hour22 = 0;
		var hour23 = 0;

		console.log(data);

		for (var station in data){
			var d = data[station];
			//console.log(d);
			for(var key in d){
				//console.log(key);

				if(key % 24 === 0){
					hour0 += d[key].value;
				}				
				if(key % 24 === 1){
					hour1 += d[key].value;
				}
				if(key % 24 === 2){
					hour2 += d[key].value;
				}
				if(key % 24 === 3){
					hour3 += d[key].value;
				}
				if(key % 24 === 4){
					hour4 += d[key].value;
				}
				if(key % 24 === 5){
					hour5 += d[key].value;
				}
				if(key % 24 === 6){
					hour6 += d[key].value;
				}
				if(key % 24 === 7){
					hour7 += d[key].value;
				}
				if(key % 24 === 8){
					hour8 += d[key].value;
				}
				if(key % 24 === 9){
					hour9 += d[key].value;
				}
				if(key % 24 === 10){
					hour10 += d[key].value;
				}
				if(key % 24 === 11){
					hour11 += d[key].value;
				}
				if(key % 24 === 12){
					hour12 += d[key].value;
				}				
				if(key % 24 === 13){
					hour13 += d[key].value;
				}
				if(key % 24 === 14){
					hour14 += d[key].value;
				}
				if(key % 24 === 15){
					hour15 += d[key].value;
				}
				if(key % 24 === 16){
					hour16 += d[key].value;
				}
				if(key % 24 === 17){
					hour17 += d[key].value;
				}
				if(key % 24 === 18){
					hour18 += d[key].value;
				}
				if(key % 24 === 19){
					hour19 += d[key].value;
				}
				if(key % 24 === 20){
					hour20 += d[key].value;
				}
				if(key % 24 === 21){
					hour21 += d[key].value;
				}
				if(key % 24 === 22){
					hour22 += d[key].value;
				}
				if(key % 24 === 23){
					hour23 += d[key].value;
				}
				//hourlysum += 
				totalsum += d[key].value;

			}
			rdstruct[station] = totalsum;					
		}
		console.log(hour0);	
		console.log(hour1);
		console.log(hour2);
		console.log(hour3);
		console.log(hour4);
		console.log(hour5);
		console.log(hour6);
		console.log(hour7);
		console.log(hour8);
		console.log(hour9);
		console.log(hour10);
		console.log(hour11);
		console.log(hour12);
		console.log(hour13);
		console.log(hour14);
		console.log(hour15);
		console.log(hour16);
		console.log(hour17);
		console.log(hour18);
		console.log(hour19);
		console.log(hour20);
		console.log(hour21);
		console.log(hour22);
		console.log(hour23);

		console.log(rdstruct);
        saveToFile(rdstruct,"reducedMonthStationHour2003_2004.json") // reducedDataSet

    })

    var saveToFile = function(object, filename){
        var blob, blobText;
        blobText = [JSON.stringify(object)];
        blob = new Blob(blobText, {
            type: "text/plain;charset=utf-8"
        });
        saveAs(blob, filename);
    }


</script>


</body>
</html>
