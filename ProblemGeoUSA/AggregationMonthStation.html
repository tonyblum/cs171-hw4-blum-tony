<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/queue.v1.min.js"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>
<script type="text/javascript" src="../jquery-1.11.0.min.js"></script>
<script src="../libs/FileSaver.js"></script>

<div id="vis"></div>


<script>


    d3.json("../data/allData2003_2004.json",function(error,data){
       // console.log(data);

        var allDates = [];
        var timeParser = d3.time.format("%b %-d, %Y %X %p");
        
		// add your source code

	//calculate the sum per each
	//console.log(data.date);	
	//console.log(data.size);

	//console.log(data[690150]);

	var sum = 0;
	var rdstruct = {};


	for (var station in data){
		var d = data[station];
		for(var key in d){
		
			//console.log(data[690150][key]);
			//console.log(timeParser.parse(data[690150][key].date));

			//should I truncate the data to just include the time and get rid of the date
			// and then sum hours with that time

			//calculate the sum for each object
			//console.log(data[690150][key].value);
			sum += d[key].value;
			//console.log(sum);	

			//data[690150][key].sum += 10;
		
		}
			//console.log(data[690150].sum);

			rdstruct[station] = sum;			
		
				
	}
			console.log(rdstruct);
        saveToFile(data,"reducedMonthStationHour2003_2004.json") // reducedDataSet



    })

    var saveToFile = function(object, filename){
        var blob, blobText;
        blobText = [JSON.stringify(object)];
        blob = new Blob(blobText, {
            type: "text/plain;charset=utf-8"
        });
        saveAs(blob, filename);
    }


</script>


</body>
</html>
